{% extends 'Intendance/base_layout.html' %}
{% load static %}
{% block acc_index_page_content %}
<style>
  .clickable-mine:hover {
    
    cursor: pointer;
    background-color:#E0ECF0;
}
</style>
<br>
<div class="row px-5">
  <div class="col-8">
<div class="pt-5 pb-5 bg-light inner-header container rounded border">
  <div class="container">
      <div class="row">
          <div class="col-md-12 text-center">
              <h1 class="mt-0 mb-3">{{ request.user.first_name }} {{ request.user.last_name }}</h1>
              <div class="breadcrumbs">
                  <p class="mb-0">{{ request.user.profile.bio }}</p>
              </div>
          </div>
      </div>
  </div>
</div>


<div class="row" style="margin-top:20px">

<div class="container" >
    <a href="{% url 'create-project' %}" class="btn btn-primary btn-lg btn-block" style="width:inherit;">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-terminal-plus" viewBox="0 0 16 16" style="margin-right:20px">
        <path d="M2 3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v4a.5.5 0 0 1-1 0V4a1 1 0 0 0-1-1H2Z"/>
        <path d="M3.146 5.146a.5.5 0 0 1 .708 0L5.177 6.47a.75.75 0 0 1 0 1.06L3.854 8.854a.5.5 0 1 1-.708-.708L4.293 7 3.146 5.854a.5.5 0 0 1 0-.708ZM5.5 9a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5ZM16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-3.5-2a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 0 0 1 0v-1h1a.5.5 0 0 0 0-1h-1v-1a.5.5 0 0 0-.5-.5Z"/>
      </svg>
      Create Project
    </a>
  
  
    <table class="table table-striped bg-light">
      <thead>
        <tr>
          <th scope="col">Name of the project</th>
          <th scope="col">Project Owner</th>
          <th scope="col">Created Date</th>
          <th scope="col">Last Modified</th>
        </tr>
      </thead>
      <tbody>
        {% for prodata in projects_data %}
          <tr class="clickable-mine" onclick="window.location='{% url 'project-tasks' prodata.project_id %}'">
            <td><p><strong> {{ prodata.name }}</strong></p></td>
            <td>{{ prodata.created_by }}</td>
            <td>{{ prodata.created_date }}</td>
            <td>{{ prodata.modified_date }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
</div>

</div>
</div>

<div class="col-4">

<div class="container-sm">
<div class="card rounded border border-dark">
    <h5 class="card-header">Notifications</h5>
    <div class="accordion" id="accordionExample">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            Invitations
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
          <div class="accordion-body" style="max-height:400px;overflow-y:scroll;">
            {% for invite in invites %}
              <h6 class="card-title"><b>{{ invite.project.name }}</b></h6>
              <p class="text-secondary my-0">{{ invite.created_date }}</p>
              <p class="card-text my-0">Project created by {{ invite.project.created_by }}</p>
              {% if invite.status == 'sent' %}
              <div style="display:flex;justify-content:left;">
                <a class="btn btn-success m-2" href="{% url 'invite-response' invite.project.project_id 'accepted' %}">Accept</a>
                <a class="btn btn-danger m-2" href="{% url 'invite-response' invite.project.project_id 'rejected' %}">Reject</a>
              </div>
              {% elif invite.status == 'accepted'%}
              <p class="text-success">You have accepted the invite.</p>
              {% elif invite.status == 'rejected'%}
              <p class="text-danger">You have rejected the invite.</p>
              {% else %}
              <p class="text-warning">Error with invite.</p>
              {% endif %}
              <hr>
              {% endfor %}
              
            
          </div>
        </div>
      </div>
      
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingThree">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Recent Activities
          </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
          <div class="accordion-body" style="max-height:400px;overflow-y:scroll;">
            {% for notification in notifications %}
              <h6 class="card-title"><b>{{ notification.title }}</b></h6>
              <p class="text-secondary my-0">{{ notification.created_date }}</p>
              <p class="card-text my-0">{{ notification.description }}</p>
              <hr>
              {% endfor %}
          </div>
        </div>
      </div>
    </div>


    
    
    
  </div>
</div> 


</div>
</div>
</div>

{% endblock acc_index_page_content %}